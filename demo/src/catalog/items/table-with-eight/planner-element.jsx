import * as Three from "three";
import React from "react";
import { Button } from "@mui/material";

const RADIUS = 20;
const HEIGHT = 40;

export default {
  name: "table-with-eight",
  prototype: "items",

  info: {
    tag: ["furnishings"],
    title: "Eight",
    description: "table-with-eight",
    image: require("./oneTable.png"),
  },

  properties: {
    width: {
      label: "width",
      type: "length-measure",
      defaultValue: {
        length: 300,
        unit: "cm",
      },
    },
    depth: {
      label: "depth",
      type: "length-measure",
      defaultValue: {
        length: 300,
        unit: "cm",
      },
    },
    height: {
      label: "height",
      type: "length-measure",
      defaultValue: {
        length: 80,
        unit: "cm",
      },
    },
    altitude: {
      label: "altitude",
      type: "length-measure",
      defaultValue: {
        length: 0,
        unit: "cm",
      },
    },
  },
  render2D: function (element, layer, scene) {
    let angle = element.rotation + 90;
    // const WIDTH = 150;
    // const DEPTH = 160;
    const HEIGHT = 50;
    let textRotation = 0;
    if (Math.sin((angle * Math.PI) / 180) < 0) {
      textRotation = 180;
    }
    let WIDTH = element.properties.get("width").get("length");
    let DEPTH = element.properties.get("depth").get("length");

    return (
      <React.Fragment>
        <g
          transform={`translate(${-WIDTH / 2},${-DEPTH / 2})`}
          // onClick={() => alert(`hoiiiiiiii ${element.id}`)}
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="#964B00"
            width={WIDTH}
            height={DEPTH}
            viewBox="0 0 200 199"
            version="1.1"
          >
            <g id="surface1">
              <path
                style={{
                  stroke: "none",
                  fillRule: "nonzero",
                  fill: "rgb(96.078431%,90.196078%,77.254902%)",
                  fillOpacity: "1",
                }}
                d="M 100 9.046875 C 91.742188 9.046875 85.019531 15.75 85.019531 23.996094 L 85.019531 38.394531 L 114.972656 38.394531 L 114.972656 23.996094 C 114.972656 15.753906 108.257812 9.046875 99.992188 9.046875 Z M 100 9.046875 "
              />
              <path
                style={{
                  stroke: "none",
                  fillRule: "nonzero",
                  fill: "rgb(96.078431%,90.196078%,77.254902%)",
                  fillOpacity: "1",
                }}
                d="M 85.027344 175.003906 C 85.027344 183.246094 91.742188 189.953125 100.007812 189.953125 C 108.269531 189.953125 114.984375 183.25 114.984375 175.003906 L 114.984375 160.605469 L 85.03125 160.605469 L 85.03125 175.003906 Z M 85.027344 175.003906 "
              />
              <path
                style={{
                  stroke: "none",
                  fillRule: "nonzero",
                  fill: "rgb(96.078431%,90.196078%,77.254902%)",
                  fillOpacity: "1",
                }}
                d="M 175.957031 83.597656 L 161.527344 83.597656 L 161.527344 113.488281 L 175.957031 113.488281 C 184.210938 113.488281 190.9375 106.785156 190.9375 98.539062 C 190.9375 90.292969 184.21875 83.589844 175.957031 83.589844 Z M 175.957031 83.597656 "
              />
              <path
                style={{
                  stroke: "none",
                  fillRule: "nonzero",
                  fill: "rgb(96.078431%,90.196078%,77.254902%)",
                  fillOpacity: "1",
                }}
                d="M 38.472656 83.597656 L 24.042969 83.597656 C 15.789062 83.597656 9.0625 90.300781 9.0625 98.546875 C 9.0625 106.789062 15.78125 113.496094 24.042969 113.496094 L 38.472656 113.496094 Z M 38.472656 83.597656 "
              />
              <path
                style={{
                  stroke: "none",
                  fillRule: "nonzero",
                  fill: "rgb(96.078431%,90.196078%,77.254902%)",
                  fillOpacity: "1",
                }}
                d="M 167.46875 58.523438 C 173.253906 52.648438 173.1875 43.164062 167.3125 37.378906 C 164.5 34.605469 160.773438 33.082031 156.808594 33.082031 L 156.695312 33.082031 C 152.691406 33.113281 148.949219 34.6875 146.152344 37.527344 L 136.019531 47.789062 L 157.316406 68.777344 L 167.46875 58.515625 Z M 167.46875 58.523438 "
              />
              <path
                style={{
                  stroke: "none",
                  fillRule: "nonzero",
                  fill: "rgb(96.078431%,90.196078%,77.254902%)",
                  fillOpacity: "1",
                }}
                d="M 36.566406 143.078125 C 33.761719 145.902344 32.230469 149.660156 32.253906 153.652344 C 32.277344 157.65625 33.855469 161.402344 36.695312 164.203125 C 39.515625 166.984375 43.242188 168.507812 47.207031 168.507812 L 47.316406 168.507812 C 51.3125 168.480469 55.0625 166.90625 57.863281 164.074219 L 68.015625 153.8125 L 46.699219 132.824219 L 36.570312 143.085938 Z M 36.566406 143.078125 "
              />
              <path
                style={{
                  stroke: "none",
                  fillRule: "nonzero",
                  fill: "rgb(96.078431%,90.196078%,77.254902%)",
                  fillOpacity: "1",
                }}
                d="M 43.578125 68.273438 L 64.898438 47.285156 L 54.761719 37.023438 C 48.953125 31.167969 39.453125 31.109375 33.578125 36.894531 C 30.730469 39.695312 29.15625 43.441406 29.132812 47.445312 C 29.109375 51.441406 30.644531 55.191406 33.445312 58.019531 L 43.574219 68.28125 Z M 43.578125 68.273438 "
              />
              <path
                style={{
                  stroke: "none",
                  fillRule: "nonzero",
                  fill: "rgb(96.078431%,90.196078%,77.254902%)",
                  fillOpacity: "1",
                }}
                d="M 151.324219 134.691406 L 130.007812 155.679688 L 140.15625 165.941406 C 142.960938 168.773438 146.703125 170.351562 150.707031 170.375 L 150.8125 170.375 C 154.777344 170.375 158.503906 168.851562 161.328125 166.070312 C 164.167969 163.273438 165.746094 159.539062 165.769531 155.546875 C 165.800781 151.550781 164.265625 147.785156 161.457031 144.945312 L 151.332031 134.6875 Z M 151.324219 134.691406 "
              />
              <path
                className="order_table"
                style={{
                  stroke: "none",
                  fillRule: "nonzero",
                  fill: "rgb(62.352941%,53.333333%,43.529412%)",
                  fillOpacity: "1",
                }}
                d="M 100 48.085938 C 71.417969 48.085938 48.164062 71.289062 48.164062 99.8125 C 48.164062 128.335938 71.417969 151.519531 100 151.519531 C 128.582031 151.519531 151.835938 128.324219 151.835938 99.8125 C 151.835938 71.300781 128.582031 48.085938 100 48.085938 Z M 100 48.085938 "
              />
              <path
                style={{
                  stroke: "none",
                  fillRule: "nonzero",
                  fill: "rgb(0%,0%,0%)",
                  fillOpacity: "1",
                }}
                d="M 76.976562 26.21875 C 77.589844 26.21875 78.082031 25.726562 78.082031 25.117188 C 78.082031 12.476562 87.914062 2.199219 100 2.199219 C 112.085938 2.199219 121.917969 12.476562 121.917969 25.117188 C 121.917969 25.726562 122.410156 26.21875 123.023438 26.21875 C 123.632812 26.21875 124.125 25.726562 124.125 25.117188 C 124.125 11.269531 113.304688 0 100.007812 0 C 86.707031 0 75.886719 11.269531 75.886719 25.117188 C 75.886719 25.726562 76.378906 26.21875 76.988281 26.21875 Z M 76.976562 26.21875 "
              />
              <path
                style={{
                  stroke: "none",
                  fillRule: "nonzero",
                  fill: "rgb(0%,0%,0%)",
                  fillOpacity: "1",
                }}
                d="M 116.726562 23.996094 C 116.726562 14.796875 109.21875 7.304688 100 7.304688 C 90.78125 7.304688 83.273438 14.796875 83.273438 23.996094 L 83.273438 40.136719 L 116.726562 40.136719 Z M 114.515625 37.929688 L 85.484375 37.929688 L 85.484375 23.996094 C 85.484375 16.003906 92 9.507812 100 9.507812 C 108 9.507812 114.515625 16.011719 114.515625 23.996094 Z M 114.515625 37.929688 "
              />
              <path
                style={{
                  stroke: "none",
                  fillRule: "nonzero",
                  fill: "rgb(0%,0%,0%)",
                  fillOpacity: "1",
                }}
                d="M 123.023438 172.78125 C 122.410156 172.78125 121.917969 173.273438 121.917969 173.882812 C 121.917969 186.523438 112.085938 196.800781 100 196.800781 C 87.914062 196.800781 78.082031 186.523438 78.082031 173.882812 C 78.082031 173.273438 77.589844 172.78125 76.976562 172.78125 C 76.367188 172.78125 75.875 173.273438 75.875 173.882812 C 75.875 187.730469 86.695312 199 99.992188 199 C 113.292969 199 124.113281 187.730469 124.113281 173.882812 C 124.113281 173.273438 123.621094 172.78125 123.011719 172.78125 Z M 123.023438 172.78125 "
              />
              <path
                style={{
                  stroke: "none",
                  fillRule: "nonzero",
                  fill: "rgb(0%,0%,0%)",
                  fillOpacity: "1",
                }}
                d="M 83.273438 175.003906 C 83.273438 184.203125 90.78125 191.695312 100 191.695312 C 109.21875 191.695312 116.726562 184.203125 116.726562 175.003906 L 116.726562 158.863281 L 83.273438 158.863281 Z M 85.484375 161.070312 L 114.515625 161.070312 L 114.515625 175.003906 C 114.515625 182.996094 108 189.492188 100 189.492188 C 92 189.492188 85.484375 182.988281 85.484375 175.003906 Z M 85.484375 161.070312 "
              />
              <path
                style={{
                  stroke: "none",
                  fillRule: "nonzero",
                  fill: "rgb(0%,0%,0%)",
                  fillOpacity: "1",
                }}
                d="M 174.832031 74.472656 C 174.222656 74.472656 173.730469 74.964844 173.730469 75.578125 C 173.730469 76.1875 174.222656 76.679688 174.832031 76.679688 C 187.496094 76.679688 197.796875 86.488281 197.796875 98.550781 C 197.796875 110.613281 187.496094 120.425781 174.832031 120.425781 C 174.222656 120.425781 173.730469 120.917969 173.730469 121.527344 C 173.730469 122.136719 174.222656 122.628906 174.832031 122.628906 C 188.707031 122.628906 200 111.828125 200 98.558594 C 200 85.285156 188.707031 74.484375 174.832031 74.484375 Z M 174.832031 74.472656 "
              />
              <path
                style={{
                  stroke: "none",
                  fillRule: "nonzero",
                  fill: "rgb(0%,0%,0%)",
                  fillOpacity: "1",
                }}
                d="M 159.78125 115.238281 L 175.957031 115.238281 C 185.175781 115.238281 192.683594 107.746094 192.683594 98.546875 C 192.683594 89.347656 185.175781 81.855469 175.957031 81.855469 L 159.78125 81.855469 Z M 161.992188 84.058594 L 175.957031 84.058594 C 183.964844 84.058594 190.472656 90.5625 190.472656 98.546875 C 190.472656 106.53125 183.964844 113.03125 175.957031 113.03125 L 161.992188 113.03125 Z M 161.992188 84.058594 "
              />
              <path
                style={{
                  stroke: "none",
                  fillRule: "nonzero",
                  fill: "rgb(0%,0%,0%)",
                  fillOpacity: "1",
                }}
                d="M 26.269531 121.519531 C 26.269531 120.910156 25.777344 120.417969 25.167969 120.417969 C 12.503906 120.417969 2.203125 110.609375 2.203125 98.546875 C 2.203125 86.484375 12.503906 76.671875 25.167969 76.671875 C 25.777344 76.671875 26.269531 76.179688 26.269531 75.570312 C 26.269531 74.960938 25.777344 74.46875 25.167969 74.46875 C 11.292969 74.46875 0 85.269531 0 98.539062 C 0 111.8125 11.292969 122.613281 25.167969 122.613281 C 25.777344 122.613281 26.269531 122.121094 26.269531 121.507812 Z M 26.269531 121.519531 "
              />
              <path
                style={{
                  stroke: "none",
                  fillRule: "nonzero",
                  fill: "rgb(0%,0%,0%)",
                  fillOpacity: "1",
                }}
                d="M 7.316406 98.546875 C 7.316406 107.746094 14.824219 115.238281 24.042969 115.238281 L 40.21875 115.238281 L 40.21875 81.855469 L 24.042969 81.855469 C 14.824219 81.855469 7.316406 89.347656 7.316406 98.546875 Z M 38.007812 113.03125 L 24.042969 113.03125 C 16.035156 113.03125 9.527344 106.53125 9.527344 98.546875 C 9.527344 90.5625 16.042969 84.058594 24.042969 84.058594 L 38.007812 84.058594 Z M 38.007812 113.03125 "
              />
              <path
                style={{
                  stroke: "none",
                  fillRule: "nonzero",
                  fill: "rgb(0%,0%,0%)",
                  fillOpacity: "1",
                }}
                d="M 140.414062 33.46875 C 149.304688 24.476562 163.535156 24.046875 172.144531 32.519531 C 180.742188 40.988281 180.511719 55.199219 171.621094 64.191406 C 171.191406 64.621094 171.199219 65.320312 171.632812 65.75 C 172.066406 66.175781 172.765625 66.167969 173.195312 65.738281 C 182.941406 55.878906 183.167969 40.273438 173.699219 30.949219 C 164.230469 21.625 148.597656 22.0625 138.851562 31.921875 C 138.421875 32.351562 138.429688 33.050781 138.863281 33.480469 C 139.296875 33.90625 139.996094 33.898438 140.425781 33.46875 Z M 140.414062 33.46875 "
              />
              <path
                style={{
                  stroke: "none",
                  fillRule: "nonzero",
                  fill: "rgb(0%,0%,0%)",
                  fillOpacity: "1",
                }}
                d="M 168.703125 59.742188 C 175.179688 53.1875 175.105469 42.613281 168.554688 36.144531 C 161.984375 29.683594 151.371094 29.757812 144.910156 36.3125 L 133.542969 47.804688 L 157.328125 71.238281 Z M 136.671875 47.789062 L 146.476562 37.855469 C 152.089844 32.164062 161.308594 32.105469 166.992188 37.707031 C 172.695312 43.324219 172.753906 52.507812 167.140625 58.195312 L 157.316406 68.132812 Z M 136.671875 47.789062 "
              />
              <path
                style={{
                  stroke: "none",
                  fillRule: "nonzero",
                  fill: "rgb(0%,0%,0%)",
                  fillOpacity: "1",
                }}
                d="M 63.609375 168.128906 C 54.714844 177.121094 40.484375 177.546875 31.882812 169.078125 C 23.285156 160.605469 23.515625 146.398438 32.40625 137.40625 C 32.835938 136.972656 32.828125 136.273438 32.394531 135.847656 C 31.960938 135.421875 31.261719 135.425781 30.832031 135.859375 C 21.085938 145.71875 20.859375 161.324219 30.328125 170.648438 C 39.796875 179.972656 55.429688 179.535156 65.175781 169.675781 C 65.601562 169.242188 65.597656 168.542969 65.164062 168.117188 C 64.730469 167.691406 64.03125 167.695312 63.601562 168.128906 Z M 63.609375 168.128906 "
              />
              <path
                style={{
                  stroke: "none",
                  fillRule: "nonzero",
                  fill: "rgb(0%,0%,0%)",
                  fillOpacity: "1",
                }}
                d="M 35.304688 141.863281 C 28.832031 148.402344 28.902344 158.996094 35.472656 165.460938 C 42.039062 171.90625 52.636719 171.851562 59.117188 165.296875 L 70.484375 153.800781 L 46.671875 130.371094 Z M 67.355469 153.820312 L 57.53125 163.753906 C 51.917969 169.425781 42.71875 169.503906 37.015625 163.886719 C 31.332031 158.285156 31.253906 149.082031 36.886719 143.410156 L 46.691406 133.476562 Z M 67.355469 153.820312 "
              />
              <path
                style={{
                  stroke: "none",
                  fillRule: "nonzero",
                  fill: "rgb(0%,0%,0%)",
                  fillOpacity: "1",
                }}
                d="M 29.28125 65.238281 C 29.714844 64.8125 29.722656 64.113281 29.292969 63.679688 C 20.402344 54.6875 20.171875 40.480469 28.773438 32.007812 C 37.371094 23.539062 51.609375 23.964844 60.5 32.957031 C 60.929688 33.390625 61.628906 33.394531 62.0625 32.96875 C 62.496094 32.542969 62.503906 31.84375 62.074219 31.410156 C 52.328125 21.554688 36.695312 21.113281 27.226562 30.4375 C 17.757812 39.761719 17.984375 55.363281 27.730469 65.226562 C 28.160156 65.660156 28.859375 65.664062 29.292969 65.238281 Z M 29.28125 65.238281 "
              />
              <path
                style={{
                  stroke: "none",
                  fillRule: "nonzero",
                  fill: "rgb(0%,0%,0%)",
                  fillOpacity: "1",
                }}
                d="M 32.363281 35.636719 C 25.796875 42.097656 25.742188 52.695312 32.199219 59.234375 L 43.566406 70.726562 L 67.378906 47.296875 L 56.011719 35.800781 C 49.535156 29.246094 38.933594 29.195312 32.363281 35.636719 Z M 43.589844 67.621094 L 33.785156 57.6875 C 28.152344 52.015625 28.226562 42.816406 33.914062 37.214844 C 39.617188 31.59375 48.816406 31.664062 54.449219 37.34375 L 64.253906 47.277344 Z M 43.589844 67.621094 "
              />
              <path
                style={{
                  stroke: "none",
                  fillRule: "nonzero",
                  fill: "rgb(0%,0%,0%)",
                  fillOpacity: "1",
                }}
                d="M 165.621094 137.726562 C 165.1875 138.152344 165.183594 138.851562 165.609375 139.285156 C 174.5 148.277344 174.738281 162.484375 166.132812 170.957031 C 157.53125 179.425781 143.292969 179 134.402344 170.007812 C 133.976562 169.574219 133.273438 169.570312 132.839844 169.996094 C 132.40625 170.421875 132.402344 171.121094 132.828125 171.554688 C 142.574219 181.414062 158.207031 181.851562 167.675781 172.527344 C 177.144531 163.203125 176.917969 147.601562 167.171875 137.738281 C 166.742188 137.304688 166.042969 137.300781 165.609375 137.726562 Z M 165.621094 137.726562 "
              />
              <path
                style={{
                  stroke: "none",
                  fillRule: "nonzero",
                  fill: "rgb(0%,0%,0%)",
                  fillOpacity: "1",
                }}
                d="M 162.542969 167.328125 C 169.113281 160.867188 169.183594 150.269531 162.710938 143.730469 L 151.34375 132.238281 L 127.546875 155.667969 L 138.898438 167.164062 C 145.371094 173.71875 155.976562 173.773438 162.542969 167.328125 Z M 151.320312 135.34375 L 161.125 145.277344 C 166.753906 150.96875 166.683594 160.152344 160.996094 165.753906 C 155.292969 171.371094 146.089844 171.300781 140.480469 165.621094 L 130.65625 155.6875 Z M 151.320312 135.34375 "
              />
              <path
                style={{
                  stroke: "none",
                  fillRule: "nonzero",
                  fill: "rgb(0%,0%,0%)",
                  fillOpacity: "1",
                }}
                d="M 153.582031 99.808594 C 153.582031 70.320312 129.53125 46.335938 100 46.335938 C 70.46875 46.335938 46.417969 70.320312 46.417969 99.808594 C 46.417969 129.296875 70.449219 153.261719 100 153.261719 C 129.550781 153.261719 153.582031 129.28125 153.582031 99.808594 Z M 100 151.058594 C 71.6875 151.058594 48.628906 128.070312 48.628906 99.808594 C 48.628906 71.546875 71.6875 48.539062 100 48.539062 C 128.3125 48.539062 151.371094 71.527344 151.371094 99.808594 C 151.371094 128.089844 128.320312 151.058594 100 151.058594 Z M 100 151.058594 "
              />
            </g>
          </svg>

          <rect
            key="1"
            x="-10"
            y="-10"
            width={WIDTH}
            height={DEPTH}
            style={{
              stroke: element.selected ? "#0096fd" : "transparent",
              strokeWidth: "2px",
              fill: "transparent",
            }}
          />
        </g>
        <g>
          <text
            style={{ transform: "rotateX(180deg)" }}
            transform="rotateX(180deg)"
            fill="#fff"
            fontWeight={"bold"}
            fontSize={50}
            x={-35}
            y={15}
            width={"100"}
          >
            {element.name}
          </text>
        </g>
      </React.Fragment>
    );
  },

  render3D: function (element, layer, scene) {
    let newAltitude = element.properties.get("altitude").get("length");

    var grey = new Three.MeshLambertMaterial({ color: 0xdddddd });
    grey.side = Three.DoubleSide;

    var cestino = new Three.Object3D();

    var cylinderGeometry1 = new Three.CylinderGeometry(0.25, 0.25, 0.0001, 80);
    var p1 = new Three.Mesh(cylinderGeometry1, grey);
    cestino.add(p1);

    var cylinderGeometry2 = new Three.CylinderGeometry(
      0.3,
      0.25,
      0.002,
      80,
      80,
      true
    );
    var p2 = new Three.Mesh(cylinderGeometry2, grey);
    p2.position.set(0, 0.001, 0);
    p1.add(p2);

    let value = new Three.Box3().setFromObject(cestino);

    let deltaX = Math.abs(value.max.x - value.min.x);
    let deltaY = Math.abs(value.max.y - value.min.y);
    let deltaZ = Math.abs(value.max.z - value.min.z);

    if (element.selected) {
      let bbox = new Three.BoxHelper(cestino, 0x99c3fb);
      bbox.material.linewidth = 5;
      bbox.renderOrder = 100;
      bbox.material.depthTest = false;
      cestino.add(bbox);
    }

    cestino.position.y += HEIGHT / 16 + newAltitude;
    cestino.scale.set(
      (1.5 * RADIUS) / deltaX,
      HEIGHT / deltaY,
      (1.5 * RADIUS) / deltaZ
    );

    return Promise.resolve(cestino);
  },
};
